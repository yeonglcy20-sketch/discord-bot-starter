const { SlashCommandBuilder } = require('discord.js');

const menusByCat = {
  'í•œì‹': [
    'ğŸ¥˜ ê¹€ì¹˜ì°Œê°œ','ğŸ¥˜ ëœì¥ì°Œê°œ','ğŸ² ë¶€ëŒ€ì°Œê°œ','ğŸ² ê°ìíƒ•','ğŸ² ìˆœë‘ë¶€ì°Œê°œ','ğŸ² í•´ì¥êµ­',
    'ğŸœ ëƒ‰ë©´','ğŸœ ì¹¼êµ­ìˆ˜','ğŸœ ì”ì¹˜êµ­ìˆ˜','ğŸœ ì½©êµ­ìˆ˜','ğŸš ë¹„ë¹”ë°¥','ğŸš ëŒì†¥ë¹„ë¹”ë°¥',
    'ğŸ– ë¶ˆê³ ê¸°','ğŸ¥“ ì‚¼ê²¹ì‚´','ğŸ– ê°ˆë¹„íƒ•','ğŸ— ë‹­ê°ˆë¹„','ğŸ— ë‹­í•œë§ˆë¦¬','ğŸ— ì‚¼ê³„íƒ•',
    'ğŸ¥Ÿ ë§Œë‘ì „ê³¨','ğŸ¥© ìœ¡íšŒë¹„ë¹”ë°¥','ğŸ¥“ ì œìœ¡ë³¶ìŒ','ğŸ¥¢ ì˜¤ì§•ì–´ë³¶ìŒ','ğŸ¦‘ ë‚™ì§€ë³¶ìŒ',
    'ğŸ¥˜ ìˆœëŒ€êµ­','ğŸ¥˜ ê³±ì°½ì „ê³¨','ğŸ¥˜ ë¼ˆí•´ì¥êµ­','ğŸ¥Ÿ ê¹€ì¹˜ì „','ğŸ¥ í•´ë¬¼íŒŒì „','ğŸŒ¯ ê¹€ë°¥',
    'ğŸŒ¶ï¸ ë‹­ë°œ','ğŸ– ì¡±ë°œ','ğŸ¥© ë³´ìŒˆ','ğŸ”¥ ë§¤ìš´ë–¡ë³¶ì´','ğŸ¢ ì–´ë¬µíƒ•','ğŸœ ë¼ë³¶ì´'
  ],
  'ì¼ì‹': [
    'ğŸ£ ì´ˆë°¥','ğŸŸ ì‚¬ì‹œë¯¸','ğŸ› ì¼ë³¸ì‹ ì¹´ë ˆ','ğŸœ ë¼ë©˜','ğŸœ ìš°ë™','ğŸ¥¢ ì•¼í‚¤ì†Œë°”',
    'ğŸ¥© ëˆì¹´ì¸ ','ğŸš ê°€ì¸ ë™','ğŸ¤ í…ë™','ğŸ² ë‚˜ë² ','ğŸ™ ì˜¤ë‹ˆê¸°ë¦¬','ğŸ™ íƒ€ì½”ì•¼í‚¤',
    'ğŸ¥Ÿ êµì','ğŸ¥¢ ì˜¤ì½”ë…¸ë¯¸ì•¼í‚¤'
  ],
  'ì¤‘ì‹': [
    'ğŸœ ì§œì¥ë©´','ğŸ”¥ ì§¬ë½•','ğŸ– íƒ•ìˆ˜ìœ¡','ğŸ¥˜ ë§ˆíŒŒë‘ë¶€','ğŸ¥© ë¼ì¡°ê¸°','ğŸ¤ ê¹ì‡¼ìƒˆìš°',
    'ğŸ¥© ìœ ì‚°ìŠ¬','ğŸš ë³¶ìŒë°¥','ğŸœ ìš°ìœ¡ë©´','ğŸŒ¶ï¸ ë§ˆë¼íƒ•','ğŸŒ¶ï¸ ë§ˆë¼ìƒ¹ê¶ˆ','ğŸ² í› ê¶ˆ',
    'ğŸ¥Ÿ ë”¤ì„¬'
  ],
  'ì–‘ì‹': [
    'ğŸ• í”¼ì','ğŸ í† ë§ˆí†  íŒŒìŠ¤íƒ€','ğŸ¥› í¬ë¦¼ íŒŒìŠ¤íƒ€','ğŸ§„ ì•Œë¦¬ì˜¤ì˜¬ë¦¬ì˜¤','ğŸ¥© ìŠ¤í…Œì´í¬',
    'ğŸ” ì¹˜ì¦ˆë²„ê±°','ğŸŒ­ í•«ë„ê·¸','ğŸ¥— ì‹œì €ìƒëŸ¬ë“œ','ğŸš ë¦¬ì¡°ë˜','ğŸ¥˜ ë¹„í”„ìŠ¤íŠœ','ğŸ¥ª íŒŒë‹ˆë‹ˆ'
  ],
  'ë™ë‚¨ì•„': [
    'ğŸœ ë² íŠ¸ë‚¨ ìŒ€êµ­ìˆ˜(í¼)','ğŸ¥— ë¶„ì§œ','ğŸ¥– ë°˜ë¯¸','ğŸœ ì¹´ì˜¤ì˜ì´','ğŸ íŒŸíƒ€ì´',
    'ğŸš ì¹´ì˜¤íŒŸ(ë³¶ìŒë°¥)','ğŸ¦ ë˜ ì–Œê¿','ğŸ› ë½ì‚¬'
  ],
  'ì¸ë„/ì¤‘ë™': [
    'ğŸ› ë²„í„°ì¹˜í‚¨ ì»¤ë¦¬','ğŸ¥˜ íŒ”ë½ íŒŒë‹ˆë¥´','ğŸ¥˜ ë‹¬(ë Œí‹¸) ì»¤ë¦¬','ğŸ«“ ë‚œ','ğŸ¥Ÿ ì‚¬ëª¨ì‚¬',
    'ğŸ¥™ ì¼€ë°¥','ğŸŒ¯ ìƒ¤ì™€ë¥´ë§ˆ','ğŸ¥— íŒ”ë¼í ','ğŸ¥£ í›„ë¬´ìŠ¤'
  ],
  'ë¶„ì‹/ì•¼ì‹': [
    'ğŸ— ì¹˜í‚¨','ğŸŸ ê°ìíŠ€ê¹€','ğŸŒ® íƒ€ì½”','ğŸŒ¯ ë¶€ë¦¬ë˜','ğŸœ ì»µë¼ë©´',
    'ğŸ¢ ì˜¤ë…ë°”','ğŸ• ì•¼ì‹ í”¼ì','ğŸ¥ª í¸ì˜ì  ìƒŒë“œìœ„ì¹˜'
  ],
  'ê°„ë‹¨ì‹': [
    'ğŸ¥ª ìƒŒë“œìœ„ì¹˜','ğŸ¥¯ ë² ì´ê¸€','ğŸ í† ìŠ¤íŠ¸','ğŸ™ ì£¼ë¨¹ë°¥','ğŸ¥— ìƒëŸ¬ë“œë³¼','ğŸ± ë„ì‹œë½'
  ],
  'ë””ì €íŠ¸': [
    'ğŸ§ ë¹™ìˆ˜','ğŸ¦ ì•„ì´ìŠ¤í¬ë¦¼','ğŸ§‡ ì™€í”Œ','ğŸ¥ í¬ë ˆì´í”„','ğŸ© ë„ë„›',
    'ğŸ° ì¹˜ì¦ˆì¼€ì´í¬','ğŸ° í‹°ë¼ë¯¸ìˆ˜','ğŸ® í‘¸ë”©','ğŸ« ì´ˆì½œë¦¿ ì¼€ì´í¬','ğŸª ì¿ í‚¤','ğŸ§ ì»µì¼€ì´í¬'
  ],
  'ì±„ì‹': [
    'ğŸ¥— ë‘ë¶€ìƒëŸ¬ë“œ','ğŸ¥™ ë¹„ê±´ ë©','ğŸ” ë¹„ê±´ ë²„ê±°','ğŸ í† ë§ˆí†  ì±„ì‹ íŒŒìŠ¤íƒ€','ğŸ² ì•¼ì±„ ìŠ¤íŠœ'
  ]
};

// ëª¨ë“  ì¹´í…Œê³ ë¦¬ í•©ì¹˜ê¸°
const ALL = Object.values(menusByCat).flat();

function pickRandom(arr) {
  return arr[Math.floor(Math.random() * arr.length)];
}

module.exports = {
  data: new SlashCommandBuilder()
    .setName('mechu')
    .setDescription('ë©”ë‰´ë¥¼ ëœë¤ìœ¼ë¡œ ì¶”ì²œí•´ì¤˜ìš”')
    .addStringOption(o =>
      o.setName('type')
       .setDescription('ì¹´í…Œê³ ë¦¬ ì„ íƒ (ë¯¸ì„ íƒ ì‹œ ì „ì²´ ëœë¤)')
       .addChoices(
         { name: 'ì „ì²´', value: 'all' },
         { name: 'í•œì‹', value: 'í•œì‹' },
         { name: 'ì¼ì‹', value: 'ì¼ì‹' },
         { name: 'ì¤‘ì‹', value: 'ì¤‘ì‹' },
         { name: 'ì–‘ì‹', value: 'ì–‘ì‹' },
         { name: 'ë¶„ì‹/ì•¼ì‹', value: 'ë¶„ì‹/ì•¼ì‹' },
         { name: 'ë™ë‚¨ì•„', value: 'ë™ë‚¨ì•„' },
         { name: 'ì¸ë„/ì¤‘ë™', value: 'ì¸ë„/ì¤‘ë™' },
         { name: 'ê°„ë‹¨ì‹', value: 'ê°„ë‹¨ì‹' },
         { name: 'ë””ì €íŠ¸', value: 'ë””ì €íŠ¸' },
         { name: 'ì±„ì‹', value: 'ì±„ì‹' }
       )
    )
    .addIntegerOption(o =>
      o.setName('count')
       .setDescription('ì¶”ì²œ ê°œìˆ˜ (1~5, ê¸°ë³¸ 1)')
       .setMinValue(1)
       .setMaxValue(5)
    ),

  async execute(interaction) {
    const type = interaction.options.getString('type') || 'all';
    const count = interaction.options.getInteger('count') ?? 1;

    const pool = (type === 'all') ? ALL : (menusByCat[type] || ALL);
    const picks = [];
    // ì¤‘ë³µ í—ˆìš©(ì›í•˜ë©´ Setìœ¼ë¡œ ì¤‘ë³µ ì œê±° ê°€ëŠ¥)
    for (let i = 0; i < count; i++) picks.push(pickRandom(pool));

    await interaction.reply(`ì˜¤ëŠ˜ ë©”ë‰´ ì¶”ì²œ${count > 1 ? `(${count}ê°œ)` : ''}: ${picks.map(p => `**${p}**`).join(', ')}`);
  },
};
